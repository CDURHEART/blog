---
title: JS-正则表达式
tags: JavaScript RegExp
key: 3231c7b9-959f-4a36-9fac-7def349ad3fe
---

> 正则表达式（regular expression）简单来讲，是用来匹配字符串的一种规则，常用来匹配、检查、替换字符。在 JavaScript 中大概可以长成像这样： `/^[a-z0-9]+$/i` ，它可以作为程序执行表达式的一部分，也可以在具备正则能力的工具里利用它，比如在 VSCode 的搜索里面用它来花式匹配、替换<!--more-->代码等。

# 正则表达式

正则表达式是用于匹配字符串中字符组合的模式。在 JavaScript 中，正则表达式也是对象。这些模式被用于 `RegExp` 的 `exec` 和 `test` 方法, 以及 `String` 的 `match`、`matchAll`、`replace`、`search` 和 `split` 方法。

例如`/apple/i`就代表了一个正则表达式，它的含义是匹配字符串中的“apple”字符，并且不区分大小写。

配合 `String.prototype.replace` 方法，我们可以用正则表达式来替换字符串中的内容。试着将字符串中的“apple”替换成“orange”，看看结果如何：

```javascript
const str = "Apple is red";
const reg = /apple/i;

const newStr = str.replace(reg, "Orange");

console.log(newStr); // "Orange is red"
```

# 创建正则表达式

## 字面量

最简单的方式是使用格式为`/ *表达式主体* / *标志*`这样的字面量来创建：

```js
const reg = /^[a-z0-9]+$/i;
```

## RegExp 对象

调用[RegExp](https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/RegExp){:target="\_blank"}对象的构造函数创建一个正则表达式对象，可以使用下面的方式：

```js
const reg = new RegExp("^[a-z0-9]+$", "i");
```

# 正则表达式语法

## 从简单到复杂

一个表达式可能只是一个简单的字符匹配，也有可能是一个复杂的组合表达式。从匹配到组合的过程中，我们可以通过添加更多的条件来提高匹配的效率。

想要更灵活和高效就需要记住更多的规则，但其实这并不难，只要从匹配的**字符**、**数量**、**位置**三个方面入手，基本就可以掌控它。

## 字符

### 普通字符

正则表达式可以就好像我们开头说的“apple”一样，精确匹配想要的某几个普通字符。

### 特殊含义字符

有一些特定的字符或者字符组在正则表达式中是有特殊含义的。例如 `\` 特殊含义是转义字符，跟在它后面的字符不再是普通字符，而是和`\`组成了一个特殊含义的标识，这个标识可能代表了一类字符。

如果遇见前面不是`\`，但是它却是特殊含义的字符时，想要获得它对应的普通字符匹配时，就需要在前面加上一个`\`。也就是如果要匹配`\`原本的“\”普通字符该怎么办？在它前面再加个转义符`\`就好了，`/\\/`就代表去匹配“\”。

| 字符                    | 含义 |
| ----------------------- | ---- |
| `\`                     | Text |
| `.`                     | Text |
| `\w`                    | Text |
| `\W`                    | Text |
| `\d`                    | Text |
| `\D`                    | Text |
| `\s`                    | Text |
| `\S`                    | Text |
| `\b`                    | Text |
| `\B`                    | Text |
| `\n`                    | Text |
| `\r`                    | Text |
| `\f`                    | Text |
| `\t`                    | Text |
| `\v`                    | Text |
| `\0`                    | Text |
| `\xhh`                  | Text |
| `\uhhhh`                | Text |
| `\u{hhhh}`或`\u{hhhhh}` | Text |

### 范围性匹配

| 字符     | 含义 |
| -------- | ---- | ---- |
| `x       | y`   | Text |
| `[xyz]`  | Text |
| `[^xyz]` | Text |
| `[a-z]`  | Text |
| `[0-9]`  | Text |

## 数量

### 限定出现的次数

| 字符    | 含义 |
| ------- | ---- |
| `*`     | Text |
| `+`     | Text |
| `?`     | Text |
| `{n}`   | Text |
| `{n,}`  | Text |
| `{n,m}` | Text |

### 惰性与贪婪

| 字符     | 含义 |
| -------- | ---- |
| `*?`     | Text |
| `+?`     | Text |
| `??`     | Text |
| `{n}?`   | Text |
| `{n,}?`  | Text |
| `{n,m}?` | Text |

## 位置

### 定位

| 字符 | 含义 |
| ---- | ---- |
| `^`  | Text |
| `$`  | Text |
| `\b` | Text |
| `\B` | Text |

### 位置关系

假设目标表达式是 exp1，存在位置相关的另一个表达式是 exp2，匹配方法可以如下表示：

| 字符            | 含义 |
| --------------- | ---- |
| `exp1(?=exp2)`  | Text |
| `exp1(?!exp2)`  | Text |
| `(?<=exp2)exp1` | Text |
| `(?<!exp2)exp1` | Text |

### 组及相关

| 字符         | 含义 |
| ------------ | ---- |
| `(x)`        | Text |
| _`\n`_       | Text |
| `(?<Name>x)` | Text |
| `(?:x)`      | Text |

## 修饰符

| 字符 | 含义 |
| ---- | ---- |
| `i`  | Text |
| `m`  | Text |
| `g`  | Text |
| `s`  | Text |
| `u`  | Text |
| `y`  | Text |

# 使用正则表达式

# 常用正则表达式

# 参考

- <https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Regular_Expressions#special-caret>{:target="\_blank"}
